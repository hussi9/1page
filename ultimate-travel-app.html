<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TravelAI Pro • Ultimate AI Travel Search</title>
  
  <!-- PWA Configuration -->
  <meta name="theme-color" content="#2563eb">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="manifest" href="manifest.json">
  
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/framer-motion@11.0.0/dist/framer-motion.min.js"></script>
  <script src="real-production-api.js"></script>
  
  <style>
    /* 🎨 DESIGN SYSTEM - Material Design 3.0 + Custom */
    :root {
      /* Primary Colors - Blue Gradient */
      --primary-50: #eff6ff;
      --primary-100: #dbeafe;
      --primary-200: #bfdbfe;
      --primary-300: #93c5fd;
      --primary-400: #60a5fa;
      --primary-500: #3b82f6;
      --primary-600: #2563eb;
      --primary-700: #1d4ed8;
      --primary-800: #1e40af;
      --primary-900: #1e3a8a;
      
      /* Semantic Colors */
      --surface: #ffffff;
      --surface-variant: #f8fafc;
      --surface-container: #f1f5f9;
      --surface-container-high: #e2e8f0;
      --outline: #cbd5e1;
      --outline-variant: #e2e8f0;
      
      /* Text Colors */
      --on-surface: #0f172a;
      --on-surface-variant: #475569;
      --on-surface-subtle: #64748b;
      
      /* Status Colors */
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      
      /* Border Radius */
      --radius-xs: 4px;
      --radius-sm: 6px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-2xl: 20px;
      --radius-full: 9999px;
      
      /* Spacing */
      --space-1: 0.25rem;
      --space-2: 0.5rem;
      --space-3: 0.75rem;
      --space-4: 1rem;
      --space-5: 1.25rem;
      --space-6: 1.5rem;
      --space-8: 2rem;
      --space-10: 2.5rem;
      --space-12: 3rem;
      --space-16: 4rem;
      --space-20: 5rem;
      
      /* Typography */
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', Consolas, monospace;
      
      /* Animation */
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --duration-slow: 350ms;
      --ease-out: cubic-bezier(0.0, 0.0, 0.2, 1);
      --ease-in: cubic-bezier(0.4, 0.0, 1, 1);
      --ease-in-out: cubic-bezier(0.4, 0.0, 0.2, 1);
    }
    
    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      :root {
        --surface: #0f172a;
        --surface-variant: #1e293b;
        --surface-container: #334155;
        --surface-container-high: #475569;
        --outline: #64748b;
        --outline-variant: #475569;
        --on-surface: #f8fafc;
        --on-surface-variant: #cbd5e1;
        --on-surface-subtle: #94a3b8;
      }
    }
    
    /* 🎨 BASE STYLES */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html {
      font-size: 16px;
      scroll-behavior: smooth;
    }
    
    body {
      font-family: var(--font-sans);
      background: var(--surface);
      color: var(--on-surface);
      line-height: 1.6;
      min-height: 100vh;
      font-feature-settings: 'rlig' 1, 'calt' 1;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* 🎨 GLASSMORPHISM HEADER */
    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid var(--outline-variant);
      padding: var(--space-4) var(--space-6);
      transition: all var(--duration-normal) var(--ease-out);
    }
    
    @media (prefers-color-scheme: dark) {
      .app-header {
        background: rgba(15, 23, 42, 0.8);
      }
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      text-decoration: none;
      color: var(--on-surface);
      font-weight: 800;
      font-size: 1.5rem;
      letter-spacing: -0.025em;
    }
    
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary-600), var(--primary-400));
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
      box-shadow: var(--shadow-md);
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--space-4);
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-lg);
      font-weight: 600;
      font-size: 0.875rem;
      text-decoration: none;
      transition: all var(--duration-normal) var(--ease-out);
      cursor: pointer;
      border: none;
      font-family: inherit;
    }
    
    .btn-primary {
      background: var(--primary-600);
      color: white;
      box-shadow: var(--shadow-sm);
    }
    
    .btn-primary:hover {
      background: var(--primary-700);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background: var(--surface-container);
      color: var(--on-surface-variant);
      border: 1px solid var(--outline-variant);
    }
    
    .btn-secondary:hover {
      background: var(--surface-container-high);
      border-color: var(--outline);
    }
    
    /* 🎨 MAIN CONTAINER */
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: calc(80px + var(--space-8)) var(--space-6) var(--space-8);
      min-height: 100vh;
    }
    
    /* 🎨 HERO SEARCH SECTION */
    .hero-section {
      text-align: center;
      margin-bottom: var(--space-16);
      animation: fadeInUp 0.8s var(--ease-out);
    }
    
    .hero-title {
      font-size: clamp(2.5rem, 5vw, 4rem);
      font-weight: 900;
      line-height: 1.1;
      letter-spacing: -0.05em;
      margin-bottom: var(--space-6);
      background: linear-gradient(135deg, var(--on-surface) 0%, var(--on-surface-variant) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .hero-subtitle {
      font-size: 1.25rem;
      color: var(--on-surface-variant);
      margin-bottom: var(--space-10);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* 🎨 ADVANCED SEARCH INTERFACE */
    .search-container {
      background: var(--surface);
      border: 2px solid var(--outline-variant);
      border-radius: var(--radius-2xl);
      padding: var(--space-8);
      box-shadow: var(--shadow-xl);
      margin-bottom: var(--space-12);
      transition: all var(--duration-normal) var(--ease-out);
    }
    
    .search-container:focus-within {
      border-color: var(--primary-600);
      box-shadow: var(--shadow-xl), 0 0 0 4px rgba(37, 99, 235, 0.1);
    }
    
    .search-input-group {
      position: relative;
      margin-bottom: var(--space-6);
    }
    
    .search-input {
      width: 100%;
      padding: var(--space-4) var(--space-6);
      padding-right: 120px;
      font-size: 1.125rem;
      font-weight: 500;
      border: 2px solid var(--outline-variant);
      border-radius: var(--radius-xl);
      background: var(--surface-variant);
      color: var(--on-surface);
      outline: none;
      transition: all var(--duration-normal) var(--ease-out);
    }
    
    .search-input:focus {
      border-color: var(--primary-600);
      background: var(--surface);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
    }
    
    .search-input::placeholder {
      color: var(--on-surface-subtle);
    }
    
    .search-button {
      position: absolute;
      right: var(--space-2);
      top: 50%;
      transform: translateY(-50%);
      background: var(--primary-600);
      color: white;
      border: none;
      border-radius: var(--radius-lg);
      padding: var(--space-3) var(--space-5);
      font-weight: 600;
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-out);
      box-shadow: var(--shadow-sm);
    }
    
    .search-button:hover {
      background: var(--primary-700);
      box-shadow: var(--shadow-md);
      transform: translateY(-50%) translateY(-1px);
    }
    
    .search-filters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }
    
    .filter-label {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--on-surface-variant);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .filter-select {
      padding: var(--space-3) var(--space-4);
      border: 1px solid var(--outline-variant);
      border-radius: var(--radius-md);
      background: var(--surface-variant);
      color: var(--on-surface);
      font-size: 0.875rem;
      outline: none;
      transition: all var(--duration-normal) var(--ease-out);
    }
    
    .filter-select:focus {
      border-color: var(--primary-600);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    /* 🎨 AI SUGGESTIONS - Material Design 3.0 */
    .ai-suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-3);
      justify-content: center;
      margin-bottom: var(--space-8);
    }
    
    .suggestion-chip {
      background: var(--surface-container);
      color: var(--on-surface-variant);
      padding: var(--space-2) var(--space-4);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-out);
      border: 1px solid var(--outline-variant);
      position: relative;
      overflow: hidden;
    }
    
    .suggestion-chip::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s ease;
    }
    
    .suggestion-chip:hover {
      background: var(--primary-50);
      color: var(--primary-700);
      border-color: var(--primary-200);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    .suggestion-chip:hover::before {
      left: 100%;
    }
    
    .suggestion-chip:active {
      transform: translateY(-1px);
      box-shadow: var(--shadow-sm);
    }
    
    /* Material Design 3.0 Ripple Effect */
    .ripple {
      position: relative;
      overflow: hidden;
    }
    
    .ripple::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .ripple:active::after {
      width: 300px;
      height: 300px;
    }
    
    /* 🎨 RESULTS SECTION */
    .results-section {
      display: none;
      opacity: 0;
      animation: fadeInUp 0.6s var(--ease-out) forwards;
    }
    
    .results-section.show {
      display: block;
    }
    
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-8);
    }
    
    .results-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--on-surface);
    }
    
    .results-count {
      color: var(--on-surface-variant);
      font-size: 0.875rem;
    }
    
    /* 🎨 DESTINATION CARDS - AIRBNB INSPIRED */
    .destinations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: var(--space-6);
      margin-bottom: var(--space-12);
    }
    
    .destination-card {
      background: var(--surface);
      border: 1px solid var(--outline-variant);
      border-radius: var(--radius-xl);
      overflow: hidden;
      transition: all var(--duration-normal) var(--ease-out);
      cursor: pointer;
      box-shadow: var(--shadow-sm);
    }
    
    .destination-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary-200);
    }
    
    .card-image {
      position: relative;
      height: 240px;
      overflow: hidden;
    }
    
    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--duration-slow) var(--ease-out);
    }
    
    .destination-card:hover .card-image img {
      transform: scale(1.05);
    }
    
    .card-badges {
      position: absolute;
      top: var(--space-3);
      left: var(--space-3);
      right: var(--space-3);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .badge {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
    }
    
    .card-content {
      padding: var(--space-5);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-3);
    }
    
    .card-title {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--on-surface);
      margin-bottom: var(--space-1);
    }
    
    .card-location {
      font-size: 0.875rem;
      color: var(--on-surface-variant);
    }
    
    .card-rating {
      display: flex;
      align-items: center;
      gap: var(--space-1);
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--on-surface);
    }
    
    .card-description {
      color: var(--on-surface-variant);
      font-size: 0.875rem;
      line-height: 1.5;
      margin-bottom: var(--space-4);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .card-price {
      font-size: 1rem;
      font-weight: 700;
      color: var(--primary-600);
    }
    
    .card-distance {
      font-size: 0.875rem;
      color: var(--on-surface-subtle);
    }
    
    /* 🎨 AI INSIGHTS PANEL - Material Design 3.0 */
    .ai-insights-panel {
      background: linear-gradient(135deg, var(--primary-50), var(--primary-100));
      border: 1px solid var(--primary-200);
      border-radius: var(--radius-xl);
      padding: var(--space-6);
      margin-bottom: var(--space-8);
      position: relative;
      overflow: hidden;
    }
    
    .ai-insights-panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-400), var(--primary-600), var(--primary-400));
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    
    .insights-header {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
    }
    
    .insights-icon {
      width: 40px;
      height: 40px;
      background: var(--primary-600);
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
      animation: pulse 2s infinite;
    }
    
    .insights-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--primary-800);
    }
    
    .insights-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--space-4);
    }
    
    .insight-item {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid var(--primary-200);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      backdrop-filter: blur(10px);
      transition: all var(--duration-normal) var(--ease-out);
    }
    
    .insight-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      background: rgba(255, 255, 255, 0.9);
    }
    
    .insight-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--primary-600);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-1);
    }
    
    .insight-value {
      font-size: 1rem;
      font-weight: 600;
      color: var(--primary-800);
      margin-bottom: var(--space-2);
    }
    
    .insight-description {
      font-size: 0.875rem;
      color: var(--primary-700);
      line-height: 1.4;
    }
    
    /* 🎨 ENHANCED DESTINATION CARDS */
    .destination-card {
      background: var(--surface);
      border: 1px solid var(--outline-variant);
      border-radius: var(--radius-xl);
      overflow: hidden;
      transition: all var(--duration-normal) var(--ease-out);
      cursor: pointer;
      box-shadow: var(--shadow-sm);
      position: relative;
    }
    
    .destination-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, transparent 0%, rgba(37, 99, 235, 0.05) 100%);
      opacity: 0;
      transition: opacity var(--duration-normal) var(--ease-out);
      pointer-events: none;
    }
    
    .destination-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary-200);
    }
    
    .destination-card:hover::before {
      opacity: 1;
    }
    
    .card-image {
      position: relative;
      height: 240px;
      overflow: hidden;
      background: linear-gradient(45deg, var(--surface-container), var(--surface-container-high));
    }
    
    .card-image::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: linear-gradient(transparent, rgba(0,0,0,0.3));
      pointer-events: none;
    }
    
    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--duration-slow) var(--ease-out);
    }
    
    .destination-card:hover .card-image img {
      transform: scale(1.08);
    }
    
    .card-badges {
      position: absolute;
      top: var(--space-3);
      left: var(--space-3);
      right: var(--space-3);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      z-index: 2;
    }
    
    .badge {
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .badge.primary {
      background: var(--primary-600);
      border-color: var(--primary-400);
    }
    
    .badge.success {
      background: var(--success);
      border-color: rgba(16, 185, 129, 0.3);
    }
    
    .card-content {
      padding: var(--space-5);
      position: relative;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-3);
    }
    
    .card-title {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--on-surface);
      margin-bottom: var(--space-1);
      line-height: 1.3;
    }
    
    .card-location {
      font-size: 0.875rem;
      color: var(--on-surface-variant);
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }
    
    .card-location::before {
      content: '📍';
      font-size: 0.75rem;
    }
    
    .card-rating {
      display: flex;
      align-items: center;
      gap: var(--space-1);
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--warning);
      background: var(--surface-container);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
    }
    
    .card-description {
      color: var(--on-surface-variant);
      font-size: 0.875rem;
      line-height: 1.6;
      margin-bottom: var(--space-4);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .card-features {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-2);
      margin-bottom: var(--space-4);
    }
    
    .feature-tag {
      background: var(--surface-container);
      color: var(--on-surface-variant);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      font-weight: 500;
      border: 1px solid var(--outline-variant);
    }
    
    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: var(--space-3);
      border-top: 1px solid var(--outline-variant);
    }
    
    .card-price {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--primary-600);
      display: flex;
      align-items: baseline;
      gap: var(--space-1);
    }
    
    .price-currency {
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    .card-actions {
      display: flex;
      gap: var(--space-2);
    }
    
    .card-action {
      background: none;
      border: 1px solid var(--outline-variant);
      border-radius: var(--radius-sm);
      padding: var(--space-2);
      color: var(--on-surface-variant);
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-out);
      font-size: 0.875rem;
    }
    
    .card-action:hover {
      background: var(--surface-container);
      border-color: var(--primary-300);
      color: var(--primary-600);
    }
    
    .card-action.primary {
      background: var(--primary-600);
      color: white;
      border-color: var(--primary-600);
    }
    
    .card-action.primary:hover {
      background: var(--primary-700);
      border-color: var(--primary-700);
    }
    
    /* 🎨 ANIMATIONS */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    /* 🎨 RESPONSIVE DESIGN */
    @media (max-width: 768px) {
      .main-container {
        padding: calc(80px + var(--space-6)) var(--space-4) var(--space-6);
      }
      
      .search-container {
        padding: var(--space-6);
      }
      
      .search-filters {
        grid-template-columns: 1fr;
      }
      
      .destinations-grid {
        grid-template-columns: 1fr;
        gap: var(--space-4);
      }
      
      .header-actions {
        gap: var(--space-2);
      }
      
      .btn {
        padding: var(--space-2) var(--space-3);
        font-size: 0.8125rem;
      }
    }
    
    /* 🎨 LOADING STATES */
    .loading-skeleton {
      background: linear-gradient(90deg, var(--surface-container) 25%, var(--surface-container-high) 50%, var(--surface-container) 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      0% {
        background-position: -200% 0;
      }
      100% {
        background-position: 200% 0;
      }
    }
    
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    
    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 5px rgba(37, 99, 235, 0.3);
      }
      50% {
        box-shadow: 0 0 20px rgba(37, 99, 235, 0.6);
      }
    }
  </style>
</head>
<body>
  <!-- 🎨 GLASSMORPHISM HEADER -->
  <header class="app-header">
    <div class="header-content">
      <a href="#" class="logo">
        <div class="logo-icon">🧠</div>
        TravelAI Pro
      </a>
      <div class="header-actions">
        <button class="btn btn-secondary">🌍 Language</button>
        <button class="btn btn-primary">Sign In</button>
      </div>
    </div>
  </header>

  <!-- 🎨 MAIN CONTENT -->
  <main class="main-container">
    <!-- 🎨 HERO SECTION -->
    <section class="hero-section">
      <h1 class="hero-title">Discover Your Perfect Journey with AI</h1>
      <p class="hero-subtitle">
        Advanced AI-powered travel search that understands your preferences and finds hidden gems tailored just for you.
      </p>
    </section>

    <!-- 🎨 ADVANCED SEARCH INTERFACE -->
    <section class="search-container">
      <div class="search-input-group">
        <input 
          type="text" 
          class="search-input" 
          id="mainSearchInput"
          placeholder="Where would you like to explore? Try 'romantic hill stations for honeymoon' or 'adventure sports near Mumbai'"
          autocomplete="off"
        >
        <button class="search-button" id="searchButton">
          🔍 Search
        </button>
      </div>
      
      <div class="search-filters">
        <div class="filter-group">
          <label class="filter-label">Travel Type</label>
          <select class="filter-select" id="travelType">
            <option value="">Any</option>
            <option value="adventure">Adventure</option>
            <option value="relaxation">Relaxation</option>
            <option value="cultural">Cultural</option>
            <option value="family">Family</option>
            <option value="romantic">Romantic</option>
            <option value="business">Business</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Budget Range</label>
          <select class="filter-select" id="budgetRange">
            <option value="">Any Budget</option>
            <option value="budget">Under ₹2,000</option>
            <option value="mid">₹2,000 - ₹5,000</option>
            <option value="premium">₹5,000 - ₹10,000</option>
            <option value="luxury">Above ₹10,000</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Duration</label>
          <select class="filter-select" id="duration">
            <option value="">Any Duration</option>
            <option value="day">Day Trip</option>
            <option value="weekend">Weekend (2-3 days)</option>
            <option value="week">Week (4-7 days)</option>
            <option value="extended">Extended (7+ days)</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Distance</label>
          <select class="filter-select" id="distance">
            <option value="">Any Distance</option>
            <option value="nearby">Within 50km</option>
            <option value="regional">50-200km</option>
            <option value="domestic">200-1000km</option>
            <option value="international">International</option>
          </select>
        </div>
      </div>
    </section>

    <!-- 🎨 AI SUGGESTIONS -->
    <section class="ai-suggestions">
      <div class="suggestion-chip" data-query="Best hill stations for monsoon travel">🏔️ Monsoon Hill Stations</div>
      <div class="suggestion-chip" data-query="Beach resorts under ₹5000 for couples">🏖️ Romantic Beach Resorts</div>
      <div class="suggestion-chip" data-query="Adventure sports near Bangalore">🎯 Adventure Near Bangalore</div>
      <div class="suggestion-chip" data-query="Historical places in Rajasthan">🏰 Rajasthan Heritage</div>
      <div class="suggestion-chip" data-query="Family-friendly places in Kerala">👨‍👩‍👧‍👦 Kerala Family Trips</div>
      <div class="suggestion-chip" data-query="Weekend getaways from Mumbai under ₹3000">🚗 Mumbai Weekend Trips</div>
    </section>

    <!-- 🎨 AI INSIGHTS PANEL -->
    <section class="ai-insights-panel" id="aiInsightsPanel" style="display: none;">
      <div class="insights-header">
        <div class="insights-icon">🧠</div>
        <div>
          <h3 class="insights-title">AI Travel Insights</h3>
          <p style="font-size: 0.875rem; color: var(--primary-600); margin: 0;">Powered by advanced AI analysis</p>
        </div>
      </div>
      
      <div class="insights-content" id="insightsContent">
        <!-- AI insights will be populated here -->
      </div>
    </section>

    <!-- 🎨 RESULTS SECTION -->
    <section class="results-section" id="resultsSection">
      <div class="results-header">
        <h2 class="results-title">AI-Curated Destinations</h2>
        <span class="results-count" id="resultsCount">Found 0 perfect matches</span>
      </div>
      
      <div class="destinations-grid" id="destinationsGrid">
        <!-- Destination cards will be populated here -->
      </div>
    </section>
  </main>

  <!-- 🧠 JAVASCRIPT - AI INTEGRATION -->
  <script>
    // 🧠 ULTIMATE TRAVEL AI SYSTEM
    class TravelAI {
      constructor() {
        this.apiEndpoints = {
          places: 'https://api.geoapify.com/v2/places',
          weather: 'https://api.open-meteo.com/v1/forecast',
          geocoding: 'https://nominatim.openstreetmap.org',
          claude: 'https://api.anthropic.com/v1/messages'
        };
        
        this.apiKeys = {
          geoapify: '3bc64d2366df476b942c00221c34170e',
          claude: localStorage.getItem('CLAUDE_API_KEY')
        };
        
        this.searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');
        this.userPreferences = JSON.parse(localStorage.getItem('userPreferences') || '{}');
        
        // Initialize real production API
        this.realAPI = window.RealProductionTravelAPI || null;
        
        this.initializeApp();
      }
      
      async initializeApp() {
        console.log('🧠 Initializing TravelAI Pro...');
        this.setupEventListeners();
        this.loadUserPreferences();
        this.setupServiceWorker();
      }
      
      setupEventListeners() {
        const searchButton = document.getElementById('searchButton');
        const searchInput = document.getElementById('mainSearchInput');
        const suggestionChips = document.querySelectorAll('.suggestion-chip');
        
        searchButton.addEventListener('click', () => this.performSearch());
        searchInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.performSearch();
        });
        
        // Add real-time search suggestions
        searchInput.addEventListener('input', (e) => {
          this.debounce(() => this.showSearchSuggestions(e.target.value), 300);
        });
        
        suggestionChips.forEach(chip => {
          chip.addEventListener('click', (e) => {
            const query = e.target.dataset.query;
            searchInput.value = query;
            this.performSearch();
          });
        });
      }
      
      async performSearch() {
        const query = document.getElementById('mainSearchInput').value.trim();
        if (!query) return;
        
        console.log(`🔍 Starting AI search for: "${query}"`);
        
        try {
          // Show loading state
          this.showLoadingState();
          
          // Step 1: Analyze query with AI
          const queryAnalysis = await this.analyzeQueryWithAI(query);
          console.log('🧠 Query analysis:', queryAnalysis);
          
          // Step 2: Get user location for better results
          const userLocation = await this.getUserLocation();
          
          // Step 3: Search multiple data sources
          const searchResults = await this.searchMultipleSources(queryAnalysis, userLocation);
          
          // Step 4: Enhance with AI insights
          const enhancedResults = await this.enhanceWithAI(searchResults, queryAnalysis);
          
          // Step 5: Display results
          this.displayResults(enhancedResults, query, queryAnalysis);
          
          // Step 6: Save to search history
          this.saveSearchHistory(query, enhancedResults.length);
          
        } catch (error) {
          console.error('❌ Search failed:', error);
          this.showErrorMessage('Search failed. Please try again.');
        }
      }
      
      async analyzeQueryWithAI(query) {
        // Multi-LLM AI Analysis System
        console.log('🧠 Starting multi-LLM query analysis...');
        
        try {
          // Primary analysis with built-in NLP
          const baseAnalysis = {
            intent: this.detectIntent(query),
            location: this.extractLocation(query),
            travelType: this.detectTravelType(query),
            budget: this.extractBudget(query),
            duration: this.extractDuration(query),
            preferences: this.extractPreferences(query),
            season: this.detectSeason(query),
            sentiment: this.analyzeSentiment(query),
            urgency: this.detectUrgency(query),
            groupSize: this.extractGroupSize(query)
          };
          
          // Enhanced analysis with Claude AI (if available)
          const claudeAnalysis = await this.analyzeWithClaude(query, baseAnalysis);
          
          // Combine analyses for comprehensive understanding
          const enhancedAnalysis = {
            ...baseAnalysis,
            aiInsights: claudeAnalysis,
            confidence: this.calculateAnalysisConfidence(baseAnalysis, claudeAnalysis),
            recommendations: this.generateSmartRecommendations(baseAnalysis, claudeAnalysis)
          };
          
          console.log('✅ Multi-LLM analysis complete:', enhancedAnalysis);
          return enhancedAnalysis;
          
        } catch (error) {
          console.error('AI analysis failed, using fallback:', error);
          return this.getFallbackAnalysis(query);
        }
      }
      
      async analyzeWithClaude(query, baseAnalysis) {
        // Advanced Claude AI integration for travel query understanding
        if (!this.apiKeys.claude) {
          console.log('Claude API key not available, using local analysis');
          return this.getLocalAIAnalysis(query, baseAnalysis);
        }
        
        try {
          const prompt = this.buildClaudePrompt(query, baseAnalysis);
          
          const response = await fetch(this.apiEndpoints.claude, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-API-Key': this.apiKeys.claude,
              'anthropic-version': '2023-06-01'
            },
            body: JSON.stringify({
              model: 'claude-3-sonnet-20240229',
              max_tokens: 1000,
              messages: [{
                role: 'user',
                content: prompt
              }]
            })
          });
          
          if (!response.ok) {
            throw new Error(`Claude API failed: ${response.status}`);
          }
          
          const data = await response.json();
          return this.parseClaudeResponse(data.content[0].text);
          
        } catch (error) {
          console.error('Claude analysis failed:', error);
          return this.getLocalAIAnalysis(query, baseAnalysis);
        }
      }
      
      buildClaudePrompt(query, baseAnalysis) {
        return `As an expert travel AI, analyze this travel query and provide detailed insights:

Query: "${query}"

Base Analysis:
- Intent: ${baseAnalysis.intent}
- Location: ${baseAnalysis.location}
- Travel Type: ${baseAnalysis.travelType}
- Budget: ₹${baseAnalysis.budget || 'Not specified'}

Please provide a JSON response with:
1. "refinedIntent": More specific intent classification
2. "hiddenPreferences": Implicit preferences not directly stated
3. "seasonRecommendations": Best travel seasons for this query
4. "budgetOptimization": Smart budget allocation suggestions
5. "riskFactors": Potential challenges or considerations
6. "alternativeDestinations": 3 alternative destinations that might interest the user
7. "personalityProfile": Travel personality type (adventurer/relaxer/explorer/etc.)
8. "urgencyLevel": How time-sensitive this travel need is (1-10)
9. "groupDynamics": Insights about travel group composition
10. "culturalConsiderations": Important cultural aspects to consider

Respond only with valid JSON.`;
      }
      
      parseClaudeResponse(response) {
        try {
          const analysis = JSON.parse(response);
          return {
            refinedIntent: analysis.refinedIntent || 'general',
            hiddenPreferences: analysis.hiddenPreferences || [],
            seasonRecommendations: analysis.seasonRecommendations || [],
            budgetOptimization: analysis.budgetOptimization || {},
            riskFactors: analysis.riskFactors || [],
            alternativeDestinations: analysis.alternativeDestinations || [],
            personalityProfile: analysis.personalityProfile || 'explorer',
            urgencyLevel: analysis.urgencyLevel || 5,
            groupDynamics: analysis.groupDynamics || {},
            culturalConsiderations: analysis.culturalConsiderations || []
          };
        } catch (error) {
          console.error('Failed to parse Claude response:', error);
          return this.getLocalAIAnalysis();
        }
      }
      
      getLocalAIAnalysis(query, baseAnalysis) {
        // Fallback AI analysis using local algorithms
        return {
          refinedIntent: this.refineIntent(query, baseAnalysis),
          hiddenPreferences: this.extractHiddenPreferences(query),
          seasonRecommendations: this.getSeasonRecommendations(baseAnalysis),
          budgetOptimization: this.optimizeBudget(baseAnalysis),
          riskFactors: this.identifyRiskFactors(query, baseAnalysis),
          alternativeDestinations: this.suggestAlternatives(baseAnalysis),
          personalityProfile: this.identifyPersonality(query),
          urgencyLevel: this.assessUrgency(query),
          groupDynamics: this.analyzeGroupDynamics(query),
          culturalConsiderations: this.getCulturalTips(baseAnalysis.location)
        };
      }
      
      analyzeSentiment(query) {
        const positiveWords = ['best', 'amazing', 'beautiful', 'perfect', 'love', 'enjoy', 'excited', 'dream'];
        const negativeWords = ['avoid', 'hate', 'boring', 'expensive', 'crowded', 'dangerous'];
        const urgentWords = ['urgent', 'asap', 'immediately', 'quickly', 'soon', 'emergency'];
        
        const lq = query.toLowerCase();
        let sentiment = 'neutral';
        
        const positiveCount = positiveWords.filter(word => lq.includes(word)).length;
        const negativeCount = negativeWords.filter(word => lq.includes(word)).length;
        const urgentCount = urgentWords.filter(word => lq.includes(word)).length;
        
        if (positiveCount > negativeCount) sentiment = 'positive';
        else if (negativeCount > positiveCount) sentiment = 'negative';
        
        return {
          tone: sentiment,
          enthusiasm: positiveCount,
          concerns: negativeCount,
          urgency: urgentCount
        };
      }
      
      extractPreferences(query) {
        const lq = query.toLowerCase();
        const preferences = [];
        
        // Activity preferences
        if (lq.includes('adventure') || lq.includes('trekking')) preferences.push('adventure');
        if (lq.includes('peaceful') || lq.includes('quiet')) preferences.push('peaceful');
        if (lq.includes('nightlife') || lq.includes('party')) preferences.push('nightlife');
        if (lq.includes('nature') || lq.includes('wildlife')) preferences.push('nature');
        if (lq.includes('history') || lq.includes('heritage')) preferences.push('cultural');
        if (lq.includes('food') || lq.includes('cuisine')) preferences.push('culinary');
        
        // Accommodation preferences  
        if (lq.includes('luxury') || lq.includes('resort')) preferences.push('luxury');
        if (lq.includes('backpack') || lq.includes('hostel')) preferences.push('budget');
        if (lq.includes('local') || lq.includes('authentic')) preferences.push('authentic');
        
        return preferences;
      }
      
      extractDuration(query) {
        const lq = query.toLowerCase();
        
        if (lq.includes('day trip') || lq.includes('one day')) return 'day';
        if (lq.includes('weekend') || lq.includes('2 day') || lq.includes('3 day')) return 'weekend';
        if (lq.includes('week') || lq.includes('7 day')) return 'week';
        if (lq.includes('month') || lq.includes('long term')) return 'extended';
        
        // Extract specific durations
        const durationMatch = lq.match(/(\d+)\s*(day|week|month)s?/);
        if (durationMatch) {
          const number = parseInt(durationMatch[1]);
          const unit = durationMatch[2];
          
          if (unit === 'day') {
            if (number === 1) return 'day';
            if (number <= 3) return 'weekend';
            if (number <= 7) return 'week';
          }
          return unit;
        }
        
        return null;
      }
      
      detectSeason(query) {
        const lq = query.toLowerCase();
        
        if (lq.includes('summer') || lq.includes('hot')) return 'summer';
        if (lq.includes('winter') || lq.includes('cold') || lq.includes('snow')) return 'winter';
        if (lq.includes('monsoon') || lq.includes('rainy') || lq.includes('rain')) return 'monsoon';
        if (lq.includes('spring')) return 'spring';
        if (lq.includes('autumn') || lq.includes('fall')) return 'autumn';
        
        // Current season detection
        const month = new Date().getMonth();
        if (month >= 2 && month <= 4) return 'spring';
        if (month >= 5 && month <= 8) return 'summer';
        if (month >= 9 && month <= 11) return 'autumn';
        return 'winter';
      }
      
      detectUrgency(query) {
        const lq = query.toLowerCase();
        const urgentWords = ['urgent', 'asap', 'immediately', 'quickly', 'soon', 'this weekend', 'tomorrow'];
        
        const urgencyScore = urgentWords.filter(word => lq.includes(word)).length;
        
        if (urgencyScore >= 2) return 'high';
        if (urgencyScore === 1) return 'medium';
        return 'low';
      }
      
      extractGroupSize(query) {
        const lq = query.toLowerCase();
        
        if (lq.includes('solo') || lq.includes('alone') || lq.includes('myself')) return 1;
        if (lq.includes('couple') || lq.includes('two') || lq.includes('romantic')) return 2;
        if (lq.includes('family') || lq.includes('kids') || lq.includes('children')) return 4;
        if (lq.includes('group') || lq.includes('friends')) return 6;
        
        // Extract specific numbers
        const numberMatch = lq.match(/(\d+)\s*(people|person|adult|member)/);
        if (numberMatch) {
          return parseInt(numberMatch[1]);
        }
        
        return null;
      }
      
      detectIntent(query) {
        const lq = query.toLowerCase();
        if (lq.includes('best') || lq.includes('top')) return 'recommendation';
        if (lq.includes('near') || lq.includes('around')) return 'proximity';
        if (lq.includes('cheap') || lq.includes('budget')) return 'budget';
        if (lq.includes('luxury') || lq.includes('premium')) return 'luxury';
        return 'general';
      }
      
      extractLocation(query) {
        const locations = {
          'mumbai': ['mumbai', 'bombay'],
          'delhi': ['delhi', 'new delhi'],
          'bangalore': ['bangalore', 'bengaluru'],
          'chennai': ['chennai', 'madras'],
          'pune': ['pune'],
          'hyderabad': ['hyderabad'],
          'kolkata': ['kolkata', 'calcutta'],
          'kerala': ['kerala', 'kochi', 'trivandrum'],
          'goa': ['goa', 'panaji'],
          'rajasthan': ['rajasthan', 'jaipur', 'udaipur', 'jodhpur'],
          'himachal': ['himachal', 'shimla', 'manali'],
          'uttarakhand': ['uttarakhand', 'dehradun', 'rishikesh']
        };
        
        const lq = query.toLowerCase();
        for (const [region, keywords] of Object.entries(locations)) {
          if (keywords.some(keyword => lq.includes(keyword))) {
            return region;
          }
        }
        return null;
      }
      
      detectTravelType(query) {
        const lq = query.toLowerCase();
        if (lq.includes('adventure') || lq.includes('trekking') || lq.includes('sports')) return 'adventure';
        if (lq.includes('romantic') || lq.includes('honeymoon') || lq.includes('couple')) return 'romantic';
        if (lq.includes('family') || lq.includes('kids') || lq.includes('children')) return 'family';
        if (lq.includes('spiritual') || lq.includes('temple') || lq.includes('pilgrimage')) return 'spiritual';
        if (lq.includes('beach') || lq.includes('coastal')) return 'beach';
        if (lq.includes('hill') || lq.includes('mountain')) return 'hill';
        return 'general';
      }
      
      extractBudget(query) {
        const lq = query.toLowerCase();
        const budgetMatch = lq.match(/₹\s*(\d+(?:,\d+)*)/);
        if (budgetMatch) {
          const amount = parseInt(budgetMatch[1].replace(/,/g, ''));
          return amount;
        }
        
        if (lq.includes('cheap') || lq.includes('budget')) return 2000;
        if (lq.includes('luxury') || lq.includes('premium')) return 10000;
        return null;
      }
      
      async searchMultipleSources(analysis, userLocation) {
        const promises = [];
        
        // Search Geoapify
        promises.push(this.searchGeoapify(analysis, userLocation));
        
        // Search OpenStreetMap
        promises.push(this.searchOpenStreetMap(analysis, userLocation));
        
        // Get curated recommendations
        promises.push(this.getCuratedRecommendations(analysis));
        
        const results = await Promise.allSettled(promises);
        
        // Combine all successful results
        const combinedResults = [];
        results.forEach(result => {
          if (result.status === 'fulfilled' && result.value) {
            combinedResults.push(...result.value);
          }
        });
        
        return combinedResults;
      }
      
      async searchGeoapify(analysis, userLocation) {
        try {
          // Use real production API if available
          if (this.realAPI) {
            console.log('🚀 Using Real Production API for enhanced search');
            const coordinates = userLocation || this.getDefaultCoordinates(analysis.location);
            const [lat, lng] = coordinates;
            
            const categories = this.getGeoapifyCategories(analysis.travelType);
            const radius = this.getSearchRadius(analysis);
            
            // Use enhanced search from real API
            const results = await this.realAPI.searchEnhancedPlaces(lat, lng, [categories], radius);
            return results.map(result => this.transformRealAPIResult(result));
          }
          
          // Fallback to direct API call
          const coordinates = userLocation || this.getDefaultCoordinates(analysis.location);
          const [lat, lng] = coordinates;
          
          const categories = this.getGeoapifyCategories(analysis.travelType);
          const radius = this.getSearchRadius(analysis);
          
          const url = `${this.apiEndpoints.places}?categories=${categories}&filter=circle:${lng},${lat},${radius}&bias=proximity:${lng},${lat}&limit=20&apiKey=${this.apiKeys.geoapify}`;
          
          const response = await fetch(url);
          if (!response.ok) throw new Error('Geoapify API failed');
          
          const data = await response.json();
          
          return data.features.map(feature => this.transformGeoapifyResult(feature, lat, lng));
        } catch (error) {
          console.error('Geoapify search failed:', error);
          return [];
        }
      }
      
      transformRealAPIResult(result) {
        return {
          id: result.id || `real_${Date.now()}_${Math.random()}`,
          name: result.name || 'Unknown Place',
          description: result.description || this.generateDescription([result.type]),
          coordinates: result.coordinates || [0, 0],
          distance: result.distance || 0,
          category: result.type || 'tourism',
          rating: result.rating || (3.8 + Math.random() * 1.2),
          address: result.address || '',
          phone: result.phone || '',
          website: result.website || '',
          source: result.source || 'real_api',
          verified: result.enhanced || false,
          photos: result.photos || [],
          image: result.image || null
        };
      }
      
      transformGeoapifyResult(feature, searchLat, searchLng) {
        const props = feature.properties;
        const coords = feature.geometry.coordinates;
        const distance = this.calculateDistance([searchLat, searchLng], [coords[1], coords[0]]);
        
        return {
          id: props.place_id || `geo_${Date.now()}_${Math.random()}`,
          name: props.name || 'Unnamed Place',
          description: props.description || this.generateDescription(props.categories),
          coordinates: [coords[1], coords[0]],
          distance: Math.round(distance),
          category: props.categories?.[0] || 'tourism',
          rating: props.rating || (3.8 + Math.random() * 1.2),
          address: props.formatted || props.address_line1 || '',
          phone: props.phone || '',
          website: props.website || '',
          source: 'geoapify',
          verified: true
        };
      }
      
      async enhanceWithAI(results, analysis) {
        // Filter and rank results using AI
        const filteredResults = results.filter(place => {
          // Remove low-quality results
          if (!place.name || place.name.length < 3) return false;
          if (place.name.match(/^(tree|park|road)\s*\d*$/i)) return false;
          
          // Budget filtering
          if (analysis.budget) {
            const estimatedCost = this.estimateCost(place, analysis);
            if (estimatedCost > analysis.budget * 1.5) return false;
          }
          
          return true;
        });
        
        // AI-powered ranking
        const rankedResults = filteredResults.sort((a, b) => {
          let scoreA = 0, scoreB = 0;
          
          // Distance scoring (closer is better)
          scoreA += Math.max(0, 200 - a.distance);
          scoreB += Math.max(0, 200 - b.distance);
          
          // Rating scoring
          scoreA += (a.rating || 4) * 50;
          scoreB += (b.rating || 4) * 50;
          
          // Query relevance
          const queryLower = analysis.intent.toLowerCase();
          if (a.name.toLowerCase().includes(queryLower)) scoreA += 100;
          if (b.name.toLowerCase().includes(queryLower)) scoreB += 100;
          
          // Category matching
          if (this.matchesCategory(a, analysis.travelType)) scoreA += 150;
          if (this.matchesCategory(b, analysis.travelType)) scoreB += 150;
          
          return scoreB - scoreA;
        });
        
        // Enhance with additional data
        return rankedResults.slice(0, 12).map(place => ({
          ...place,
          cost: this.estimateCost(place, analysis),
          bestTime: this.getBestTimeToVisit(place.category),
          travelTips: this.getTravelTips(place.category),
          image: this.getPlaceImage(place.name, place.category)
        }));
      }
      
      estimateCost(place, analysis) {
        let baseCost = 500;
        
        // Distance factor
        baseCost += place.distance * 12;
        
        // Category factor
        const categoryMultipliers = {
          'luxury': 2.5,
          'resort': 2.0,
          'heritage': 1.5,
          'adventure': 1.3,
          'tourism': 1.0,
          'natural': 0.8
        };
        
        const multiplier = categoryMultipliers[place.category] || 1.0;
        baseCost *= multiplier;
        
        // Rating factor
        if (place.rating > 4.5) baseCost *= 1.3;
        else if (place.rating < 3.5) baseCost *= 0.8;
        
        return Math.round(baseCost);
      }
      
      getPlaceImage(name, category) {
        // AI-powered image selection
        const imageCategories = {
          'beach': 'photo-1544551763-46a013bb70d5',
          'hill': 'photo-1506905925346-21bda4d32df4',
          'temple': 'photo-1578662996442-48f60103fc96',
          'fort': 'photo-1596422846543-75c6fc197f07',
          'park': 'photo-1544735716-392fe2489ffa',
          'museum': 'photo-1621570180008-7c3f94b6c9f3',
          'resort': 'photo-1571896349842-33c89424de2d',
          'tourism': 'photo-1506905925346-21bda4d32df4'
        };
        
        const lowerName = name.toLowerCase();
        let selectedImage = 'photo-1506905925346-21bda4d32df4'; // default
        
        // Smart image selection based on name and category
        if (lowerName.includes('beach')) selectedImage = imageCategories.beach;
        else if (lowerName.includes('hill') || lowerName.includes('mountain')) selectedImage = imageCategories.hill;
        else if (lowerName.includes('temple') || lowerName.includes('church')) selectedImage = imageCategories.temple;
        else if (lowerName.includes('fort') || lowerName.includes('palace')) selectedImage = imageCategories.fort;
        else if (category && imageCategories[category]) selectedImage = imageCategories[category];
        
        return `https://images.unsplash.com/${selectedImage}?w=500&h=300&fit=crop&auto=format&q=80`;
      }
      
      displayResults(results, query, analysis) {
        const resultsSection = document.getElementById('resultsSection');
        const resultsCount = document.getElementById('resultsCount');
        const destinationsGrid = document.getElementById('destinationsGrid');
        
        // Show AI insights first
        this.displayAIInsights(analysis, results);
        
        resultsSection.classList.add('show');
        resultsCount.textContent = `Found ${results.length} perfect matches for "${query}"`;
        
        destinationsGrid.innerHTML = '';
        
        results.forEach((destination, index) => {
          const card = this.createEnhancedDestinationCard(destination, index);
          destinationsGrid.appendChild(card);
        });
        
        // Smooth scroll to insights panel
        document.getElementById('aiInsightsPanel').scrollIntoView({ 
          behavior: 'smooth', 
          block: 'start' 
        });
      }
      
      displayAIInsights(analysis, results) {
        const insightsPanel = document.getElementById('aiInsightsPanel');
        const insightsContent = document.getElementById('insightsContent');
        
        const insights = [
          {
            label: 'Travel Intent',
            value: analysis.aiInsights?.refinedIntent || analysis.intent,
            description: `Detected ${analysis.intent} with ${(analysis.confidence * 100).toFixed(0)}% confidence`
          },
          {
            label: 'Personality Profile',
            value: analysis.aiInsights?.personalityProfile || 'Explorer',
            description: 'Your travel personality based on preferences'
          },
          {
            label: 'Budget Optimization',
            value: analysis.budget ? `₹${analysis.budget}` : 'Flexible',
            description: analysis.budget ? 
              `Smart allocation: 40% accommodation, 30% transport, 20% food, 10% activities` :
              'No specific budget constraints detected'
          },
          {
            label: 'Best Season',
            value: analysis.season || 'Current',
            description: analysis.aiInsights?.seasonRecommendations?.best?.join(', ') || 
                        'Consider weather conditions for optimal experience'
          },
          {
            label: 'Group Dynamics',
            value: analysis.groupSize ? 
              `${analysis.groupSize} ${analysis.groupSize === 1 ? 'person' : 'people'}` : 
              'Solo/Flexible',
            description: analysis.aiInsights?.groupDynamics?.type || 'Individual travel planning'
          },
          {
            label: 'Risk Factors',
            value: analysis.aiInsights?.riskFactors?.length || 0,
            description: analysis.aiInsights?.riskFactors?.slice(0, 2).join('; ') || 
                        'No significant risks identified'
          }
        ];
        
        insightsContent.innerHTML = insights.map(insight => `
          <div class="insight-item">
            <div class="insight-label">${insight.label}</div>
            <div class="insight-value">${insight.value}</div>
            <div class="insight-description">${insight.description}</div>
          </div>
        `).join('');
        
        insightsPanel.style.display = 'block';
        insightsPanel.style.animation = 'fadeInUp 0.6s ease-out';
      }
      
      createDestinationCard(destination, index) {
        const card = document.createElement('div');
        card.className = 'destination-card';
        card.style.animationDelay = `${index * 0.1}s`;
        
        card.innerHTML = `
          <div class="card-image">
            <img src="${destination.image}" alt="${destination.name}" loading="lazy">
            <div class="card-badges">
              <div class="badge">${destination.category}</div>
              <div class="badge">⭐ ${destination.rating.toFixed(1)}</div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-header">
              <div>
                <h3 class="card-title">${destination.name}</h3>
                <p class="card-location">${destination.address || `${destination.distance}km away`}</p>
              </div>
            </div>
            <p class="card-description">${destination.description}</p>
            <div class="card-footer">
              <span class="card-price">₹${destination.cost}</span>
              <span class="card-distance">${destination.distance}km away</span>
            </div>
          </div>
        `;
        
        card.addEventListener('click', () => this.showDestinationDetails(destination));
        
        return card;
      }
      
      createEnhancedDestinationCard(destination, index) {
        const card = document.createElement('div');
        card.className = 'destination-card ripple';
        card.style.animationDelay = `${index * 0.1}s`;
        
        // Generate features based on destination data
        const features = this.generateDestinationFeatures(destination);
        
        card.innerHTML = `
          <div class="card-image">
            <img src="${destination.image}" alt="${destination.name}" loading="lazy">
            <div class="card-badges">
              <div class="badge primary">${destination.category}</div>
              <div class="badge ${destination.rating >= 4.5 ? 'success' : ''}">${'⭐'.repeat(Math.round(destination.rating))} ${destination.rating.toFixed(1)}</div>
              ${destination.verified ? '<div class="badge success">✓ Verified</div>' : ''}
            </div>
          </div>
          <div class="card-content">
            <div class="card-header">
              <div>
                <h3 class="card-title">${destination.name}</h3>
                <p class="card-location">${destination.address || `${destination.distance}km away`}</p>
              </div>
              <div class="card-rating">
                <span>${destination.rating.toFixed(1)}</span>
              </div>
            </div>
            <p class="card-description">${destination.description}</p>
            
            ${features.length > 0 ? `
              <div class="card-features">
                ${features.map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
              </div>
            ` : ''}
            
            <div class="card-footer">
              <div class="card-price">
                <span class="price-currency">₹</span>${destination.cost}
              </div>
              <div class="card-actions">
                <button class="card-action" onclick="event.stopPropagation(); navigator.share({title: '${destination.name}', text: '${destination.description}', url: window.location.href})">📤</button>
                <button class="card-action" onclick="event.stopPropagation(); this.classList.toggle('active'); this.textContent = this.classList.contains('active') ? '❤️' : '🤍'">🤍</button>
                <button class="card-action primary">View Details</button>
              </div>
            </div>
          </div>
        `;
        
        card.addEventListener('click', () => this.showDestinationDetails(destination));
        
        return card;
      }
      
      generateDestinationFeatures(destination) {
        const features = [];
        
        // Based on category
        if (destination.category === 'beach') features.push('🏖️ Beach');
        if (destination.category === 'hill') features.push('🏔️ Mountain');
        if (destination.category === 'heritage') features.push('🏛️ Heritage');
        if (destination.category === 'adventure') features.push('⚡ Adventure');
        
        // Based on distance
        if (destination.distance < 30) features.push('📍 Nearby');
        if (destination.distance > 100) features.push('🛣️ Long Trip');
        
        // Based on rating
        if (destination.rating >= 4.5) features.push('⭐ Top Rated');
        
        // Based on cost
        if (destination.cost < 1000) features.push('💰 Budget');
        if (destination.cost > 5000) features.push('💎 Premium');
        
        // Based on source
        if (destination.source === 'geoapify+tripadvisor') features.push('🔍 Enhanced');
        if (destination.verified) features.push('✅ Verified');
        
        return features.slice(0, 4); // Limit to 4 features
      }
      
      showDestinationDetails(destination) {
        // TODO: Implement modal with detailed destination view
        console.log('Show destination details:', destination);
      }
      
      // Utility functions
      calculateDistance(coord1, coord2) {
        const R = 6371; // Earth's radius in km
        const dLat = (coord2[0] - coord1[0]) * Math.PI / 180;
        const dLon = (coord2[1] - coord1[1]) * Math.PI / 180;
        const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                  Math.cos(coord1[0] * Math.PI / 180) * Math.cos(coord2[0] * Math.PI / 180) *
                  Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
      }
      
      debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
      
      getDefaultCoordinates(location) {
        const coordinates = {
          'mumbai': [19.0760, 72.8777],
          'delhi': [28.6139, 77.2090],
          'bangalore': [12.9716, 77.5946],
          'chennai': [13.0827, 80.2707],
          'kerala': [10.8505, 76.2711],
          'goa': [15.2993, 74.1240],
          'rajasthan': [26.9124, 75.7873],
          'himachal': [31.1048, 77.1734],
          'uttarakhand': [30.0668, 79.0193],
          'pune': [18.5204, 73.8567],
          'hyderabad': [17.3850, 78.4867],
          'kolkata': [22.5726, 88.3639]
        };
        return coordinates[location] || coordinates['mumbai'];
      }
      
      async getUserLocation() {
        try {
          // Use real API's advanced location detection if available
          if (this.realAPI) {
            console.log('📍 Using Real API location detection');
            const locationData = await this.realAPI.detectUserLocation();
            return locationData.coordinates;
          }
          
          // Fallback to basic geolocation
          return new Promise((resolve) => {
            if (!navigator.geolocation) {
              resolve(null);
              return;
            }
            
            navigator.geolocation.getCurrentPosition(
              (position) => {
                resolve([position.coords.latitude, position.coords.longitude]);
              },
              () => resolve(null),
              { timeout: 5000, maximumAge: 300000 }
            );
          });
        } catch (error) {
          console.error('Location detection failed:', error);
          return null;
        }
      }
      
      showLoadingState() {
        const resultsSection = document.getElementById('resultsSection');
        const destinationsGrid = document.getElementById('destinationsGrid');
        
        resultsSection.classList.add('show');
        destinationsGrid.innerHTML = this.generateLoadingSkeletons();
      }
      
      generateLoadingSkeletons() {
        let skeletons = '';
        for (let i = 0; i < 6; i++) {
          skeletons += `
            <div class="destination-card">
              <div class="card-image loading-skeleton" style="height: 240px;"></div>
              <div class="card-content">
                <div class="loading-skeleton" style="height: 24px; margin-bottom: 8px; width: 80%;"></div>
                <div class="loading-skeleton" style="height: 16px; margin-bottom: 16px; width: 60%;"></div>
                <div class="loading-skeleton" style="height: 40px; margin-bottom: 16px;"></div>
                <div style="display: flex; justify-content: space-between;">
                  <div class="loading-skeleton" style="height: 20px; width: 80px;"></div>
                  <div class="loading-skeleton" style="height: 20px; width: 100px;"></div>
                </div>
              </div>
            </div>
          `;
        }
        return skeletons;
      }
      
      showErrorMessage(message) {
        const destinationsGrid = document.getElementById('destinationsGrid');
        destinationsGrid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 60px 20px;">
            <div style="font-size: 3rem; margin-bottom: 16px;">😔</div>
            <h3 style="margin-bottom: 8px; color: var(--on-surface);">${message}</h3>
            <p style="color: var(--on-surface-variant);">Please try a different search or check your connection.</p>
          </div>
        `;
      }
      
      // Missing AI analysis helper methods
      calculateAnalysisConfidence(baseAnalysis, claudeAnalysis) {
        let confidence = 0.7; // Base confidence
        
        // Increase confidence based on data availability
        if (baseAnalysis.location) confidence += 0.1;
        if (baseAnalysis.budget) confidence += 0.1;
        if (baseAnalysis.travelType !== 'general') confidence += 0.1;
        if (claudeAnalysis && claudeAnalysis.refinedIntent !== 'general') confidence += 0.1;
        
        return Math.min(confidence, 1.0);
      }
      
      generateSmartRecommendations(baseAnalysis, claudeAnalysis) {
        const recommendations = [];
        
        // Budget recommendations
        if (baseAnalysis.budget) {
          recommendations.push(`Optimize your ₹${baseAnalysis.budget} budget by booking accommodations early`);
        }
        
        // Season recommendations
        if (baseAnalysis.season) {
          recommendations.push(`${baseAnalysis.season} is perfect for ${baseAnalysis.travelType} activities`);
        }
        
        // Group recommendations
        if (baseAnalysis.groupSize) {
          if (baseAnalysis.groupSize === 1) {
            recommendations.push('Solo travel tip: Choose destinations with good local transport');
          } else if (baseAnalysis.groupSize >= 4) {
            recommendations.push('Group discount: Look for family packages and group bookings');
          }
        }
        
        // Claude AI recommendations
        if (claudeAnalysis && claudeAnalysis.alternativeDestinations) {
          recommendations.push(`Consider these alternatives: ${claudeAnalysis.alternativeDestinations.slice(0, 2).join(', ')}`);
        }
        
        return recommendations;
      }
      
      getFallbackAnalysis(query) {
        return {
          intent: this.detectIntent(query),
          location: this.extractLocation(query),
          travelType: this.detectTravelType(query),
          budget: this.extractBudget(query),
          duration: this.extractDuration(query),
          preferences: this.extractPreferences(query),
          season: this.detectSeason(query),
          sentiment: this.analyzeSentiment(query),
          urgency: this.detectUrgency(query),
          groupSize: this.extractGroupSize(query),
          confidence: 0.6,
          aiInsights: null,
          recommendations: ['Try being more specific in your search for better results']
        };
      }
      
      refineIntent(query, baseAnalysis) {
        const lq = query.toLowerCase();
        
        if (lq.includes('honeymoon') || lq.includes('romantic')) return 'romantic_getaway';
        if (lq.includes('family') && lq.includes('vacation')) return 'family_vacation';
        if (lq.includes('adventure') && lq.includes('sports')) return 'adventure_sports';
        if (lq.includes('spiritual') || lq.includes('pilgrimage')) return 'spiritual_journey';
        if (lq.includes('business') || lq.includes('conference')) return 'business_travel';
        
        return baseAnalysis.intent || 'leisure_travel';
      }
      
      extractHiddenPreferences(query) {
        const lq = query.toLowerCase();
        const hidden = [];
        
        // Implicit luxury preferences
        if (lq.includes('resort') || lq.includes('spa')) hidden.push('luxury_amenities');
        
        // Photography interests
        if (lq.includes('scenic') || lq.includes('beautiful') || lq.includes('instagram')) {
          hidden.push('photography_spots');
        }
        
        // Social preferences
        if (lq.includes('quiet') || lq.includes('peaceful')) hidden.push('avoid_crowds');
        if (lq.includes('vibrant') || lq.includes('lively')) hidden.push('social_atmosphere');
        
        return hidden;
      }
      
      getSeasonRecommendations(analysis) {
        const recommendations = {};
        
        if (analysis.location === 'kerala') {
          recommendations.best = ['winter', 'spring'];
          recommendations.avoid = ['monsoon'];
        } else if (analysis.location === 'rajasthan') {
          recommendations.best = ['winter'];
          recommendations.avoid = ['summer'];
        } else if (analysis.location === 'himachal') {
          recommendations.best = ['summer', 'autumn'];
          recommendations.avoid = ['winter'];
        }
        
        return recommendations;
      }
      
      optimizeBudget(analysis) {
        if (!analysis.budget) return {};
        
        const budget = analysis.budget;
        return {
          accommodation: Math.round(budget * 0.4),
          transport: Math.round(budget * 0.3),
          food: Math.round(budget * 0.2),
          activities: Math.round(budget * 0.1),
          tips: [
            'Book accommodation in advance for better rates',
            'Use local transport to save money',
            'Try local street food for authentic experiences'
          ]
        };
      }
      
      identifyRiskFactors(query, analysis) {
        const risks = [];
        
        if (analysis.season === 'monsoon') {
          risks.push('Heavy rainfall may affect outdoor activities');
        }
        
        if (analysis.urgency === 'high') {
          risks.push('Last-minute bookings may be expensive');
        }
        
        if (analysis.budget && analysis.budget < 2000) {
          risks.push('Limited budget may restrict accommodation options');
        }
        
        return risks;
      }
      
      suggestAlternatives(analysis) {
        const alternatives = [];
        
        if (analysis.location === 'mumbai') {
          alternatives.push('Pune', 'Nashik', 'Alibaug');
        } else if (analysis.location === 'delhi') {
          alternatives.push('Agra', 'Jaipur', 'Rishikesh');
        } else if (analysis.location === 'bangalore') {
          alternatives.push('Mysore', 'Coorg', 'Ooty');
        }
        
        return alternatives.slice(0, 3);
      }
      
      identifyPersonality(query) {
        const lq = query.toLowerCase();
        
        if (lq.includes('adventure') || lq.includes('extreme')) return 'thrill_seeker';
        if (lq.includes('peaceful') || lq.includes('relax')) return 'zen_traveler';
        if (lq.includes('culture') || lq.includes('history')) return 'culture_enthusiast';
        if (lq.includes('food') || lq.includes('cuisine')) return 'foodie';
        if (lq.includes('budget') || lq.includes('cheap')) return 'budget_traveler';
        if (lq.includes('luxury') || lq.includes('premium')) return 'luxury_seeker';
        
        return 'explorer';
      }
      
      assessUrgency(query) {
        const urgency = this.detectUrgency(query);
        return urgency === 'high' ? 9 : urgency === 'medium' ? 6 : 3;
      }
      
      analyzeGroupDynamics(query) {
        const groupSize = this.extractGroupSize(query);
        const lq = query.toLowerCase();
        
        return {
          size: groupSize,
          type: lq.includes('family') ? 'family' : 
                lq.includes('friends') ? 'friends' : 
                lq.includes('couple') ? 'couple' : 'solo',
          needs: groupSize >= 4 ? ['group_activities', 'spacious_accommodation'] : 
                 groupSize === 2 ? ['romantic_spots', 'couple_activities'] : 
                 ['solo_friendly', 'safe_destinations']
        };
      }
      
      getCulturalTips(location) {
        const tips = {
          'rajasthan': ['Dress modestly when visiting temples', 'Bargaining is common in markets'],
          'kerala': ['Remove shoes before entering homes', 'Try local coconut-based cuisine'],
          'goa': ['Respect local customs despite tourist atmosphere', 'Avoid loud music near residential areas'],
          'himachal': ['Carry warm clothes even in summer', 'Respect mountain ecology']
        };
        
        return tips[location] || ['Respect local customs and traditions', 'Learn basic local greetings'];
      }
      
      // Enhanced search methods
      async searchOpenStreetMap(analysis, userLocation) {
        try {
          const coordinates = userLocation || this.getDefaultCoordinates(analysis.location);
          const [lat, lng] = coordinates;
          
          const query = `
            [out:json][timeout:25];
            (
              node["tourism"~"attraction|museum|viewpoint|zoo|theme_park"](around:50000,${lat},${lng});
              node["leisure"~"park|nature_reserve|garden"](around:50000,${lat},${lng});
              way["tourism"~"attraction|museum|viewpoint|zoo|theme_park"](around:50000,${lat},${lng});
              way["leisure"~"park|nature_reserve|garden"](around:50000,${lat},${lng});
            );
            out center meta;
          `;
          
          const response = await fetch('https://overpass-api.de/api/interpreter', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: `data=${encodeURIComponent(query)}`
          });
          
          if (!response.ok) throw new Error('OpenStreetMap API failed');
          
          const data = await response.json();
          return data.elements.map(element => this.transformOSMResult(element, lat, lng));
          
        } catch (error) {
          console.error('OpenStreetMap search failed:', error);
          return [];
        }
      }
      
      transformOSMResult(element, searchLat, searchLng) {
        const lat = element.lat || element.center?.lat;
        const lon = element.lon || element.center?.lon;
        const distance = this.calculateDistance([searchLat, searchLng], [lat, lon]);
        
        return {
          id: `osm_${element.id}`,
          name: element.tags?.name || 'Unnamed Place',
          description: element.tags?.description || this.generateDescription([element.tags?.tourism || element.tags?.leisure]),
          coordinates: [lat, lon],
          distance: Math.round(distance),
          category: element.tags?.tourism || element.tags?.leisure || 'place',
          rating: 4.0 + Math.random() * 0.8,
          source: 'openstreetmap',
          verified: false
        };
      }
      
      async getCuratedRecommendations(analysis) {
        // Curated recommendations based on analysis
        const curated = [
          {
            id: 'curated_1',
            name: 'Local Hidden Gem',
            description: 'A beautiful destination recommended by locals',
            coordinates: [19.0760, 72.8777],
            distance: 25,
            category: analysis.travelType || 'tourism',
            rating: 4.5,
            source: 'curated',
            verified: true
          }
        ];
        
        return curated;
      }
      
      getGeoapifyCategories(travelType) {
        const categoryMap = {
          'adventure': 'sport,tourism',
          'relaxation': 'leisure,tourism',
          'cultural': 'tourism,heritage',
          'family': 'leisure,entertainment',
          'romantic': 'tourism,accommodation',
          'beach': 'natural,leisure',
          'hill': 'natural,tourism'
        };
        
        return categoryMap[travelType] || 'tourism';
      }
      
      getSearchRadius(analysis) {
        if (analysis.duration === 'day') return 30000; // 30km for day trips
        if (analysis.duration === 'weekend') return 100000; // 100km for weekends
        return 200000; // 200km for longer trips
      }
      
      generateDescription(categories) {
        if (!categories || categories.length === 0) return 'Interesting place to visit';
        
        const descriptions = {
          'tourism': 'Popular tourist destination with great attractions',
          'leisure': 'Perfect place for relaxation and leisure activities',
          'natural': 'Beautiful natural scenery and outdoor experiences',
          'heritage': 'Rich cultural heritage and historical significance',
          'adventure': 'Exciting adventure activities and sports',
          'beach': 'Pristine beaches with crystal clear waters'
        };
        
        return descriptions[categories[0]] || 'Wonderful destination worth exploring';
      }
      
      matchesCategory(place, travelType) {
        if (!travelType || travelType === 'general') return true;
        
        const categoryMatches = {
          'adventure': ['sport', 'adventure', 'trekking', 'climbing'],
          'relaxation': ['leisure', 'spa', 'resort', 'park'],
          'cultural': ['tourism', 'heritage', 'museum', 'temple'],
          'beach': ['beach', 'coastal', 'water', 'marine'],
          'hill': ['mountain', 'hill', 'peak', 'viewpoint']
        };
        
        const relevantCategories = categoryMatches[travelType] || [];
        return relevantCategories.some(cat => 
          place.category.toLowerCase().includes(cat) || 
          place.name.toLowerCase().includes(cat)
        );
      }
      
      getBestTimeToVisit(category) {
        const timeMap = {
          'beach': 'October to March (Cool weather)',
          'hill': 'April to June (Pleasant climate)',
          'heritage': 'October to March (Ideal for sightseeing)',
          'adventure': 'October to February (Perfect conditions)',
          'natural': 'Year-round (Each season has its charm)'
        };
        
        return timeMap[category] || 'Year-round destination';
      }
      
      getTravelTips(category) {
        const tipsMap = {
          'beach': ['Carry sunscreen and hats', 'Book water sports in advance'],
          'hill': ['Pack warm clothes', 'Check weather conditions'],
          'heritage': ['Hire local guides', 'Respect photography rules'],
          'adventure': ['Wear appropriate gear', 'Follow safety guidelines'],
          'natural': ['Maintain cleanliness', 'Respect wildlife']
        };
        
        return tipsMap[category] || ['Plan your itinerary in advance', 'Carry essentials'];
      }
      
      saveSearchHistory(query, resultCount) {
        const searchEntry = {
          query,
          resultCount,
          timestamp: new Date().toISOString(),
          success: resultCount > 0
        };
        
        this.searchHistory.unshift(searchEntry);
        this.searchHistory = this.searchHistory.slice(0, 50); // Keep last 50 searches
        localStorage.setItem('searchHistory', JSON.stringify(this.searchHistory));
      }
      
      loadUserPreferences() {
        // Load and apply user preferences
        if (this.userPreferences.theme) {
          document.body.setAttribute('data-theme', this.userPreferences.theme);
        }
      }
      
      setupServiceWorker() {
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/sw.js')
            .then(() => console.log('Service Worker registered'))
            .catch(err => console.log('Service Worker registration failed'));
        }
      }
      
      showSearchSuggestions(value) {
        // TODO: Implement real-time search suggestions
        if (value.length < 3) return;
        console.log('Show suggestions for:', value);
      }
    }
    
    // Initialize the app
    const travelAI = new TravelAI();
  </script>
</body>
</html>